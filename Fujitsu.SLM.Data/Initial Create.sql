CREATE TABLE [dbo].[CommunicationTypeRefData] (
    [Id] [int] NOT NULL IDENTITY,
    [CommunicationTypeNumber] [int] NOT NULL,
    [CommunicationTypeName] [nvarchar](100) NOT NULL,
    [SortOrder] [int] NOT NULL,
    CONSTRAINT [PK_dbo.CommunicationTypeRefData] PRIMARY KEY ([Id])
)
CREATE TABLE [dbo].[ComponentTypeRefData] (
    [Id] [int] NOT NULL IDENTITY,
    [ComponentName] [nvarchar](100) NOT NULL,
    [ComponentLevel] [int] NOT NULL,
    [SortOrder] [int] NOT NULL,
    CONSTRAINT [PK_dbo.ComponentTypeRefData] PRIMARY KEY ([Id])
)
CREATE TABLE [dbo].[Customer] (
    [Id] [int] NOT NULL IDENTITY,
    [CustomerName] [nvarchar](100) NOT NULL,
    [CustomerNotes] [nvarchar](250),
    [InsertedDate] [datetime] NOT NULL,
    [InsertedBy] [nvarchar](50) NOT NULL,
    [UpdatedDate] [datetime] NOT NULL,
    [UpdatedBy] [nvarchar](50) NOT NULL,
    CONSTRAINT [PK_dbo.Customer] PRIMARY KEY ([Id])
)
CREATE TABLE [dbo].[ServiceDecomposition] (
    [Id] [int] NOT NULL IDENTITY,
    [DecompositionName] [nvarchar](100) NOT NULL,
    [DecompositionNotes] [nvarchar](250),
    [InsertedDate] [datetime] NOT NULL,
    [InsertedBy] [nvarchar](50) NOT NULL,
    [UpdatedDate] [datetime] NOT NULL,
    [UpdatedBy] [nvarchar](50) NOT NULL,
    [CustomerId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.ServiceDecomposition] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_CustomerId] ON [dbo].[ServiceDecomposition]([CustomerId])
CREATE TABLE [dbo].[ServiceDesk] (
    [Id] [int] NOT NULL IDENTITY,
    [DeskName] [nvarchar](100) NOT NULL,
    [InsertedDate] [datetime] NOT NULL,
    [InsertedBy] [nvarchar](50) NOT NULL,
    [UpdatedDate] [datetime] NOT NULL,
    [UpdatedBy] [nvarchar](50) NOT NULL,
    [ServiceDecompositionId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.ServiceDesk] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_ServiceDecompositionId] ON [dbo].[ServiceDesk]([ServiceDecompositionId])
CREATE TABLE [dbo].[DeskCommunicationType] (
    [Id] [int] NOT NULL IDENTITY,
    [ServiceDeskId] [int] NOT NULL,
    [CommunicationTypeRefData_Id] [int],
    CONSTRAINT [PK_dbo.DeskCommunicationType] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_ServiceDeskId] ON [dbo].[DeskCommunicationType]([ServiceDeskId])
CREATE INDEX [IX_CommunicationTypeRefData_Id] ON [dbo].[DeskCommunicationType]([CommunicationTypeRefData_Id])
CREATE TABLE [dbo].[ServiceDomain] (
    [Id] [int] NOT NULL IDENTITY,
    [DomainName] [nvarchar](100) NOT NULL,
    [InsertedDate] [datetime] NOT NULL,
    [InsertedBy] [nvarchar](50) NOT NULL,
    [UpdatedDate] [datetime] NOT NULL,
    [UpdatedBy] [nvarchar](50) NOT NULL,
    [ServiceDeskId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.ServiceDomain] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_ServiceDeskId] ON [dbo].[ServiceDomain]([ServiceDeskId])
CREATE TABLE [dbo].[ServiceFunction] (
    [Id] [int] NOT NULL IDENTITY,
    [InsertedDate] [datetime] NOT NULL,
    [InsertedBy] [nvarchar](50) NOT NULL,
    [UpdatedDate] [datetime] NOT NULL,
    [UpdatedBy] [nvarchar](50) NOT NULL,
    [FunctionTypeId] [int] NOT NULL,
    [ServiceDomainId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.ServiceFunction] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_FunctionTypeId] ON [dbo].[ServiceFunction]([FunctionTypeId])
CREATE INDEX [IX_ServiceDomainId] ON [dbo].[ServiceFunction]([ServiceDomainId])
CREATE TABLE [dbo].[FunctionTypeRefData] (
    [Id] [int] NOT NULL IDENTITY,
    [FunctionName] [nvarchar](100) NOT NULL,
    [SortOrder] [int] NOT NULL,
    CONSTRAINT [PK_dbo.FunctionTypeRefData] PRIMARY KEY ([Id])
)
CREATE TABLE [dbo].[ServiceComponent] (
    [Id] [int] NOT NULL IDENTITY,
    [ComponentLevel] [int] NOT NULL,
    [ParentComponentId] [int],
    [ComponentTypeId] [int] NOT NULL,
    [ServiceFunctionId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.ServiceComponent] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_ComponentTypeId] ON [dbo].[ServiceComponent]([ComponentTypeId])
CREATE INDEX [IX_ServiceFunctionId] ON [dbo].[ServiceComponent]([ServiceFunctionId])
CREATE TABLE [dbo].[ServiceActivity] (
    [Id] [int] NOT NULL IDENTITY,
    [ActivityName] [nvarchar](255) NOT NULL,
    [Active] [bit] NOT NULL,
    [ServiceComponentId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.ServiceActivity] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_ServiceComponentId] ON [dbo].[ServiceActivity]([ServiceComponentId])
ALTER TABLE [dbo].[ServiceDecomposition] ADD CONSTRAINT [FK_dbo.ServiceDecomposition_dbo.Customer_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [dbo].[Customer] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[ServiceDesk] ADD CONSTRAINT [FK_dbo.ServiceDesk_dbo.ServiceDecomposition_ServiceDecompositionId] FOREIGN KEY ([ServiceDecompositionId]) REFERENCES [dbo].[ServiceDecomposition] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[DeskCommunicationType] ADD CONSTRAINT [FK_dbo.DeskCommunicationType_dbo.CommunicationTypeRefData_CommunicationTypeRefData_Id] FOREIGN KEY ([CommunicationTypeRefData_Id]) REFERENCES [dbo].[CommunicationTypeRefData] ([Id])
ALTER TABLE [dbo].[DeskCommunicationType] ADD CONSTRAINT [FK_dbo.DeskCommunicationType_dbo.ServiceDesk_ServiceDeskId] FOREIGN KEY ([ServiceDeskId]) REFERENCES [dbo].[ServiceDesk] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[ServiceDomain] ADD CONSTRAINT [FK_dbo.ServiceDomain_dbo.ServiceDesk_ServiceDeskId] FOREIGN KEY ([ServiceDeskId]) REFERENCES [dbo].[ServiceDesk] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[ServiceFunction] ADD CONSTRAINT [FK_dbo.ServiceFunction_dbo.FunctionTypeRefData_FunctionTypeId] FOREIGN KEY ([FunctionTypeId]) REFERENCES [dbo].[FunctionTypeRefData] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[ServiceFunction] ADD CONSTRAINT [FK_dbo.ServiceFunction_dbo.ServiceDomain_ServiceDomainId] FOREIGN KEY ([ServiceDomainId]) REFERENCES [dbo].[ServiceDomain] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[ServiceComponent] ADD CONSTRAINT [FK_dbo.ServiceComponent_dbo.ComponentTypeRefData_ComponentTypeId] FOREIGN KEY ([ComponentTypeId]) REFERENCES [dbo].[ComponentTypeRefData] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[ServiceComponent] ADD CONSTRAINT [FK_dbo.ServiceComponent_dbo.ServiceFunction_ServiceFunctionId] FOREIGN KEY ([ServiceFunctionId]) REFERENCES [dbo].[ServiceFunction] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[ServiceActivity] ADD CONSTRAINT [FK_dbo.ServiceActivity_dbo.ServiceComponent_ServiceComponentId] FOREIGN KEY ([ServiceComponentId]) REFERENCES [dbo].[ServiceComponent] ([Id]) ON DELETE CASCADE
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201501221256386_Initial Create', N'Fujitsu.SLM.Data.Migrations.Configuration',  0x1F8B0800000000000400ED5DDD6EDCBA11BE2FD077107459E4786D07014E8DF539709CB8301AC7413639E89D21AFE88D6AFD6C25AD61E3A04FD68B3E525FA1A4563F94C8218794B43F3E8BDCC42B72480EBFF9480D479CFFFDE7BFD35F9FA3D07922691624F1B97B7274EC3A249E277E102FCEDD55FEF0D3CFEEAFBFFCF94FD38F7EF4ECFC56957BCBCAD19A7176EEFEC8F3E5D96492CD7F90C8CB8EA2609E2659F2901FCD9368E2F9C9E4F4F8F8AF93939309A1225C2ACB71A65F57711E44A4F883FE7999C473B2CC575E7893F824CCCADFE9935921D5F9EC45245B7A7372EE5EADFE19E4D9EA68F6E9E6E883977BAE7311061EEDC78C840FAEE3C571927B39EDE5D9F78CCCF2348917B325FDC10BBFBD2C092DF7E08519297B7FD614C70EE4F8940D64D254AC44CD57599E4486024FDE969A9974AB5BE9D7AD354775F791EA387F61A32EF477EE5E2651B48A8379219FFDFE953CAC55D86DFCEC324C5981B6BA8BC93982A4BC7184B26F6AC45060B17F6F9CCB5598AF52721E93559E7AB4C497D57D18CCFF4E5EBE258F243E8F5761C88F828E833E6BFD407FFA92264B92E62FB4E9726CD7BEEB4CDAF526DD8A7535AECE7A94D771FEF6D4753ED3C6BDFB90D420E13432CB9394FC8DC424F572E27FF1F29CA43193410A350BAD77DA12B4F67915DD9354D70153A1F4E74A24C53E3562D7B9F19E3F917891FFA0E67D4CCDF62A78267EF54BD9CC772A844ED8B99BA72B62DC8D5992E6B7A96F369AE9A4C1A70EB5CB24A65AEE835841C201AD1A60AD35B61D40D5CD7F224F24EC67232383B38021136E04C8B2D601844A14945ADA1206ABD6939C648AE64FDFE19A57B7761D67F42FE2536AAAC7CAFEFF2D88CCBB5E097BFFA2E837B2DB864D7F5FFADE50C328656D62149FBDA7605180B6CB1E247D0AE6E40399334ACA025684A2E12B098BD2D98F60B9DE791EC94ADE35F4709526D1D7240444D605EFBE79E982E474C409A6F42C59A5735BEE928936E331998403A7A9DA6AA96A3BC4D6EEC281DD5E3FBB012B9B1EF758966C686E3C62ACA80E478C158D1AF37CF6A8A1F7ECF14E4E9C928100656192872A0CC3F3D9A325BD678F075657536AF6B81D323F30EB2E31ABCC768763598632C1E323672B69D1BB16113474A52D2CF095BE868CB04CF7D9E3F330B8A6E888DB7458947103F5788A12D00C8185C095442CD96B09914EB8D96222157158565074923D0EB857030F01D03C028BD0910A5453B044C3EA3DB67B9BE04FDCE86476DD6BC357B28ECD96AFA87AB04EE5A6AFD0D161DB77D8F68DC2D33A8AEAB97180B63EF016C3B0E357AB78AEF5965685EE3A94258C405E10DAFE00A587788BAE445BD16A55F940AC0772DB1772AB30CB9A356637D5EBD07054C97711C536ED0A30D9F0E520C69417B624CDFAE05BC99A75A93B819484B1806521EE842BD8BED36B5F7EFBAE02BA9991AF1956AB003FC956B128120187D500C33FAF31B4A96B72569B8ABAF601479B8A29FAE2A554502D511806B227032EA995950CEA276A7A895B8D3A55146B51AB24C4DF5071CBB5F5822AE829C803C065DE2EF57227DAA6301EB02CB4B6C2152CD7D666E11F7BB7A09D23687BD187182B7D59F16255F9408BAAB62A2D6996D7D377EFC6585E8BD6EB76DF27145A5E6CCB81301FF775C270243036730076A6A71A8C9D5D6459320F8AFE2BCEDD9AE08CB6963EC6BE6314A9B10613140342F1456D2E58522BA35D3D77FF224C0BB6C19A6D9B069BF8927623276ED7646FE30F242439712E0ADEA20B9F97CD3D5F0409D5A9DFFE855A39611B81C00B2F2922286F04712E524210CF83A5179A0CA52304C92CAC937573DD271FC892C48C144CE610D30F3E9C48EC4FDD6C47993ADD4D271C58D518363CA48230667B62D5800E3825C5C3DCF2D48BC73D7834D7EEC5F1D1D14997337A2A9C77419B0D50EA971E5DADD263740965318FFAAE91087A441B2012F49C62FAD2394AD90A9F68434CB4AB9436DE040533D482A80D31345B84B70F6DECC836B9446AE6D308D89DD0B0AD225C3C3BD4E14D71902802AD74E39AA35A11E7B42704AD1DC906E10BCED99E11B2FCF8468325CD598E00A7C639620C5BF54910D794F410614711AC1CD4E640AC9C464C37BAC798DB0432E431D5E04BEB3E15C0CCB9208CD1ACF3BEB65F3A245F68EF28A035E3DA1CA435D3897AF5EE9E246C13D5B0FF4B833484334C4076E319360636C26B8F37A49D81B576549B03B6763E0DF61D2D9FEE6E707677A380E651F0486524DE06033ED09B9E9D41B77650DBA06D603E0DD0CD9FDAEEC4CEBAFDE686DDEF02D138A3ECADE5B13CD897CF9D01B47A3C5BD8574BE7D0E405B18EE9DB0090D7A75BB44E4E6B90B4EAC9A71BB6F3643F9367592CCDF78C94C7C659795ED9451D133B23B9F65399E6784DEB7717902DB421D93BCBE44B8AE964972733994C607D40A61122735CC904CABD8B58E1C567D7B04CE6E2D18882BE8E148402C709C89E163057F5B5E41D9C382E481E12D890A646A4D4AB20489596C275960F4E857ACBED5C7042F9A81C4868B3D9EFC8E4E8410D58EEBE01AE8E02B9C019B8DC07AF3C05AFC70D9A924098A6E7DE5C139CC977D7AFB6B2108A34FDF84FD46C9F9359C4099EF66C96530C440F0AE55B9EC6F2B3815D15869A9C166162E703F4FF23B4213B091843EBB2B300996515EB486FE56A4F00552C823A35B43B37448ED8EEA4D094A87AE855F2CD1AAC50CD2195E131956494D5928E50227C30353A18818F5740BD214E4BCCCF4BC451723B18BDFED427249C70CC2EC55A9360C032A84B94C3DEC6652FEA93DF64E915AA73D2B7D722FD1B84B54E15C18FA056910E633B97B1A8597EA7A9D7ACDE4B6C3277438055781F40C055E9ABB4F3560E0759C83F69403203D069E7BD4DCFA70A1F9985976C284695FBC5D0AB9D4291553071ED6EA99F4D27EBEBD9CB1FA613E01EF7E98DB75C06F182BBD7BDFCC599AD2F75BFFC69667EDF79B496319967926BCFEBDED62DE549EA2D48E729E3459F5C0569963342BCF75874F8A51F09C53ACE25E0DDB66A4CE33F12A7B57AF1AD04B0FF57AFF5EDFBEE615793E8AD2BA55DD18147CCF5577C2B80793F114439EC2A7E2FF452C9A70A9749B88A62D82B09D716DAAF2E45E7458285FAB4537CEDA06EA528826F83FB529097CBFD2CCA9A4E3A3324B84E0564084EE936F2B0B814B7027D31A99588C32342CC6858E4AF3CEF60837F6421B3FCE6502AB47CF63A9156BBA3FAC10B70C6612005561D0946AD4BCB5B13DE7A6221717D55AF54E4FA115E66FB8A8DD6685B4FCC25B21B2A64F2DE0BDE5B95B4D6D519BCB8D6036379DDCE713FEF8CC9C87D2FBDCC07E38E4298124ECC386625B9379B1726796C2B5BB432D9F383A90D696A3AEAEB6247F5C9D9F60D97B9FD86B157D1D76962A6B2DA63596775FF71DB6EAA5F0FD6B2096B91F173775EA1323B6345C089512F7B929FF89B5B1652CE3836C6993538A9F26F34B6CE88A5CB69104E947ADD0C5811A83F122F725784B69891FBFDC08D1BE5C6BDB39EC61D3C84FD402701780B82258C634307D4DBA3BEFBD1132F50F741142C5588F8945913180EBA357B929D29F7322984408459A1A48C635AEDABF564E078C54E70F1F072087E05CFB0F104AB1031B2E77B502FB5E48E3C5EB0E4B1458F65C4A6FD280E96DB59E2006E537DB5B16D3873410E43C0B98EBCB546332C611C30B7EF33E3E5B49F184A94C93263C68E7103D8D218C4D8E06A070120DECC15E1C0A62FE40A51562FE22C58029341491BD12BCE020AB7A058F947325C6F071F08F8398FB5012AFB7B99C47EE15972AE3376F55E7DED9EA57ABAC12922748518956E91DA70CA5FEABFEB1895323EA415B852688885A1149AC9CA58956EC0C8BA88EB50753C057E112CF292E5242A99F45FE1651814917055811B2F0E1E4896AF6F96744F8F8F7F769D8B30F0B275C851190A73D6FD8009151B73F296C5C6103F9A74AB9B47D8302959E6B72EBE942668C7DCB4B681EB3203A665ED8598E6C9C8E5F1275C9BBD457ACDED9BF19397CE7F78A978BD75DFBBABF55DC5E73DD7466AECF37CF3D11E034F4A77436D0FA251A7577E03E8DE4EA92493FC70332A4B142F955E24536EA4DB664E668EA07C985C28D26EBE33D78124D589752F855427769DEC9706FD75E01ECC363E18F8E164E2070BD8B605C054D5819DF0A1FC75EC93E773F7F7A2DA9973FD8FBBA6E61BA75874CE9C63E7DF839BA07003E1FE5A5E3B23F46006773087E13A0905439899865CCA186682707BECADC1744E612DA7805536D03CE2CD8CF74A1852262C0AEAA2B81E5AE67C7D1D981033AC1E687497697493A66B9DB7F37598C601BFC375529EE1120BE076ED5E8B8F103B61674A65F5318C491BACB0B706254B33B8179E5875D4C0DECEC7707E5230595F4718C61921C416186F09F9EA43908598F8CF902E1A0123AEBEF22880BD05A72C691AE0EF7AD73327DA7D607132208925B0C206276100700C957DACB9CB6D3DA8CD25FC525FCC3640C633AB2B45155FC762ACC9E99B35EC0F95254C1DEFA2BD0D549785ABD516705325D790656A2C3B98E1EF9D181C76D82F7824B8338BC2D91A106117B8F42AB7AD64C2D95564AABF97DC21306A3E35D993EC667D96BCB19763BC650C8D3DD30571B8DC647FA4FC63DBA7BECE7D6192BE20D39EED03D5E9BEBADC698A33CB1726BD72929BDD4D27ED02AF7AEB9759C10A75B82F9DC6429FE29B45B1C97DCEF325BFA2B3FD5EB1D9445BF0ED8D3DD3D6D8BE81606E191B0B87AA6FBBA42F1EAF203797DD7C8F8BC1261D80D8257C5EB041D2116D21ABD61F2B7B96CDA2F78A19D06645DC06F921BE94DCFDFC56A65BFC57BBFD337F0BD8C2C64F7BF1C0C6F25089370A77A7B69D0907F61637E7285AC7F2FA23B473D7BF4F2842D667337069C1E52CF4C83E2915D013FBF455CAEC55D2D6FAE4B642A7B692B52C2F89ED05F361C08DB3A7CA366D9364E17364C99A1F209D963E9B966ADC5609B730F9B6148D6E222997ACF921B277A1927729C6CE95C2B5DCECC9A1869B128A7677340B5897A5DAB70E8BAB90CEA1CE4941B1C95EE7F5D22D7D4659B43027549C581C71ED41662EC9FA215C04BA9BAAD29E458D9467AB8FC1F555FD2EA7CDB245907435975CBB38982AC64E86A558B6B1F9A9D4EF70A28AC02DC54EE7B952BD29A0D34E69DC2CA2AEE02DC8BE24B0B21B9EDA1B2A0A02B74CFB928ECAC66076014D1BCB2E654AB91B6025837C51E29D3BD3C9D755CC3E0F59FF45579E60D18860370BC564DE72C3D465AEE387A4720B757A5415E9C4C9DE90DCF3291F5DA479F0E0CD73FA784EB22C8817AEF39B17AE68918FD13DF1AFE3DB55BE5CE574C824BA0F5BE6C4BC4AAAF68BA458ED3E4F6F97ECAF6C8821D06E06ECB398DBF8FD2A08FDBADF5792B05C4004735795B1D16C2E731623BD78A9257DA6A6811354AAAFF6B27D23D132A4C2B2DB78E6B18866F3BE7DCFC827B2F0E62FD5D549B010FD44B4D53EFD10788BD48BB25246539FFE4931EC47CFBFFC1F61F9793621CB0000 , N'6.1.1-30610')

